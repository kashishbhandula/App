const Credential=require('../model/credentials.ejs');
module.exports.sign_up=function(req,res)
{
    if(req.isAuthenticated())
    {
        return res.redirect('/profile');
    }
    res.render('sign_up');
    return;
};
module.exports.sign_in=function(req,res)
{
    if(req.isAuthenticated())
    {
        return res.redirect('/profile');
    }
    res.render('sign_in');
    return;
};
module.exports.sign_out=function(req,res)
{
    req.logout();
    res.redirect('/');
    return;
};
module.exports.profile=function(req,res)
{
    res.render('profile');
    return;
};
module.exports.data_collect=function(req,res)
{
    
    ///console.log(req.body);
    if(req.body.password!=req.body.confirm_password)
    {
        console.log("Password and Confirm-Password are different");
        res.render('back');

    }
    else
    {
       Credential.findOne({email:req.body.email},function(err,user){
           if(err){console.log("Error in checking wether the email is present or not");return;}
           if(!user)
           {
               Credential.create(req.body,function(err,user){
                   if(err){console.log("Error in creating entry into database");return;}
                   console.log("data in stored in the database");
                   res.render('sign_in.ejs');

               });
           }
           else
           {
            console.log("Account already present");
            res.render('sign_in.ejs');
           }
       });

    }
    
};
module.exports.createSession=function(req,res)
{
    //console.log(res);
    res.redirect('/profile');
    return;
}

